@model ProyectoLuisa.Models.Noticia

@{
    bool esEdicion = Model?.Id > 0;
    ViewData["Title"] = esEdicion ? "Editar Noticia" : "Crear Noticia";
}

<div class="container mt-4">

    <h2 class="text-center text-primary fw-bold mb-4">
        @(esEdicion ? "‚úèÔ∏è Editar Noticia" : "üì∞ Crear Nueva Noticia")
    </h2>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger text-center">@TempData["Error"]</div>
    }

    <form asp-action="@(esEdicion ? "Editar" : "Crear")" 
          method="post" 
          enctype="multipart/form-data"
          class="card shadow p-4">

        @Html.AntiForgeryToken()
        
        @if (esEdicion)
        {
            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="ImagenUrl" />
        }

        <div class="mb-3">
            <label asp-for="Titulo" class="form-label fw-bold"></label>
            <input asp-for="Titulo" class="form-control" />
            <span asp-validation-for="Titulo" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Contenido" class="form-label fw-bold"></label>
            <textarea asp-for="Contenido" class="form-control" rows="6"></textarea>
            <span asp-validation-for="Contenido" class="text-danger"></span>
        </div>

        <!-- Imagen -->
        <div class="mb-3">
            <label class="form-label fw-bold">Imagen</label>
            <input type="file" name="imagenFile" class="form-control" accept="image/*" />
        </div>

        @if (esEdicion && !string.IsNullOrEmpty(Model.ImagenUrl))
        {
            <div class="mb-3 text-center">
                <p class="fw-bold">Imagen actual:</p>
                <img src="~/uploads/noticias/@Model.ImagenUrl" 
                     class="img-fluid rounded border" 
                     style="max-height: 250px;" />
            </div>
        }

        <div class="text-center">
            <button type="submit" class="btn btn-success px-4">
                @(esEdicion ? "Guardar Cambios" : "Crear Noticia")
            </button>

            <a asp-action="Index" class="btn btn-secondary px-4 ms-2">
                Volver
            </a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
